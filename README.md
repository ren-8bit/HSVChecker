# HSVChecker ver. 0.1.3

## ライセンス上の重要な伝達事項

利用の際には以下URLにあるライセンスに同意の上でご利用ください。

同意が必要なライセンス:
1. [IPAフォントライセンス v1.0](https://github.com/uehara1414/japanize-matplotlib/blob/master/japanize_matplotlib/fonts/IPA_Font_License_Agreement_v1.0.txt)

## スクリプトの概要

- pngファイルを読み込んでHSV空間別の画像ファイルを生成するスクリプトになります。
  - 空間別のヒストグラムの作成機能もあります。
  
## スクリプトの環境構築方法

- `pipenv` と `pyenv` に対応しているため環境だけ揃えて頂ければ下記のコマンドで構築可能です。

``` bash
$ pipenv sync
```

- 構築した仮想環境に移動する方法は以下のコマンドで可能です。
  - PATHの整合性が付かない場合は各々の環境で調整してください。

``` bash
$ pipenv shell
```

## 環境再構築方法

``` bash
# ローカル環境の全削除
$ pipenv --rm
# ローカル環境の再構築
$ pipenv sync
# 仮想環境に移行
$ pipenv shell
```

## スクリプトの使い方（簡易版）

前提： `pipenv` などの開発用環境は事前に設定がしてあることとします。

1. `input` フォルダ内に解析したい画像を入れてください。
  - サブフォルダも探索してくれます。
  - ファイル名を参照して出力ファイル名を決めるため決まった文字列が欲しい場合は予め名前を変更してください。 
  - [未確認] 長いファイル名(255文字以上)は扱えない可能性があるため注意です。
2. このReadMeのファイルがあるディレクトリに移動してください。
3. `pipenv sync` コマンドを実行してください。
  - 過去に環境構築したことがある場合は、事前に `pipenv --rm` 後に実行すると確実かもしれません。
  - `pipenv sync` だけで上手く動かない場合はお試しください。
4. `pipenv shell` で仮想環境に移行してください。
5. `python .\main.py` コマンドを実行してください。
  - `input` フォルダの画像をプログラム側が認識して勝手に解析してくれます。
  - 解析結果は `output` フォルダ内に格納しております。

## スクリプトの使い方（詳細版）

- 以下のコマンドを実行することで利用可能です。

``` bash
# 一括処理モード（デフォルトの挙動）
$ python main.py
# 特定ファイルのみ処理
$ python main.py -f ${加工したい画像ファイル名}
```

- 他のコマンドは以下で確認可能です。

``` bash
$ python main.py -h
```

## 開発環境と依存ライブラリ一覧

- python: 3.9.1
- matplotlib: 3.5.0
  - グラフ作成表示に利用
- japanize-matplotlib: 1.1.3
  - 日本語表示用のライブラリ
- pillow: 8.4.0
  - 画像変換・加工に利用
- NumPy: 1.22.0
  - 中央値と平均値の計算に利用

## 伝達事項

- `japanize-matplotlib` を導入しましたため、日本語表示が可能になりました。
  - ver. 0.1.1以前をご利用の方はコード更新と共に実行環境の更新が必要になります。
- スクリプトの動作保障などは行っておりません。利用は自己責任の範囲で行ってください。
  - 不具合が起きないよう作りましたが何か見つけた場合はIssueにでも投げて頂ければ対応するかもしれません。
- 一括処理モード（Batch mode）実装しました。
  - メモリ不足が起きにくいようには実装しましたが不具合などが残っている可能性はあります。
